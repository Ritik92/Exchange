import { useEffect, useRef } from "react";
import { ChartManager } from "../utils/ChartManager";

// Define interface for the new data format
interface ExchangeData {
  time_period_start: string;
  time_period_end: string;
  time_open: string;
  time_close: string;
  rate_open: number;
  rate_high: number;
  rate_low: number;
  rate_close: number;
}

export function TradeView({
  market,
}: {
  market: string;
}) {
  const chartRef = useRef<HTMLDivElement>(null);
  const chartManagerRef = useRef<ChartManager>(null);

  // Sample fixed data
  const fixedData: ExchangeData[] =[
    {
        "time_period_start": "2024-10-25T00:00:00.0000000Z",
        "time_period_end": "0001-01-01T00:00:00.0000000Z",
        "time_open": "2024-10-25T00:00:00.0000000Z",
        "time_close": "2024-10-25T00:59:59.8000000Z",
        "rate_open": 177.09757659249772,
        "rate_high": 177.39564271473046,
        "rate_low": 176.10856305289906,
        "rate_close": 176.63366000593825
    },
    {
        "time_period_start": "2024-10-25T01:00:00.0000000Z",
        "time_period_end": "0001-01-01T00:00:00.0000000Z",
        "time_open": "2024-10-25T01:00:00.0000000Z",
        "time_close": "2024-10-25T01:59:54.5000000Z",
        "rate_open": 176.6331675944943,
        "rate_high": 176.63700449332123,
        "rate_low": 175.26914921456608,
        "rate_close": 175.65467901080666
    },
    {
        "time_period_start": "2024-10-25T02:00:00.0000000Z",
        "time_period_end": "0001-01-01T00:00:00.0000000Z",
        "time_open": "2024-10-25T02:00:00.0000000Z",
        "time_close": "2024-10-25T02:59:59.8000000Z",
        "rate_open": 175.64227090629322,
        "rate_high": 176.45391836373938,
        "rate_low": 175.0742428661975,
        "rate_close": 175.65671425343686
    },
    {
        "time_period_start": "2024-10-25T03:00:00.0000000Z",
        "time_period_end": "0001-01-01T00:00:00.0000000Z",
        "time_open": "2024-10-25T03:00:00.0000000Z",
        "time_close": "2024-10-25T03:59:59.9000000Z",
        "rate_open": 175.65671425343686,
        "rate_high": 176.35559048227157,
        "rate_low": 174.2847174336749,
        "rate_close": 174.59536298727744
    },
    {
        "time_period_start": "2024-10-25T04:00:00.0000000Z",
        "time_period_end": "0001-01-01T00:00:00.0000000Z",
        "time_open": "2024-10-25T04:00:00.0000000Z",
        "time_close": "2024-10-25T04:59:59.8000000Z",
        "rate_open": 174.61542459362894,
        "rate_high": 174.98874514378974,
        "rate_low": 172.7916744330457,
        "rate_close": 173.17722198190313
    },
    {
        "time_period_start": "2024-10-25T05:00:00.0000000Z",
        "time_period_end": "0001-01-01T00:00:00.0000000Z",
        "time_open": "2024-10-25T05:00:00.0000000Z",
        "time_close": "2024-10-25T05:59:59.9000000Z",
        "rate_open": 173.17722198190313,
        "rate_high": 174.06774423322693,
        "rate_low": 172.22296799967424,
        "rate_close": 173.7429583017627
    },
    {
        "time_period_start": "2024-10-25T06:00:00.0000000Z",
        "time_period_end": "0001-01-01T00:00:00.0000000Z",
        "time_open": "2024-10-25T06:00:00.0000000Z",
        "time_close": "2024-10-25T06:59:59.8000000Z",
        "rate_open": 173.7480258812526,
        "rate_high": 174.4481974307736,
        "rate_low": 173.27307390821488,
        "rate_close": 173.4558980038308
    },
    {
        "time_period_start": "2024-10-25T07:00:00.0000000Z",
        "time_period_end": "0001-01-01T00:00:00.0000000Z",
        "time_open": "2024-10-25T07:00:00.0000000Z",
        "time_close": "2024-10-25T07:59:59.9000000Z",
        "rate_open": 173.46702842869257,
        "rate_high": 173.86247544008322,
        "rate_low": 171.40270811100925,
        "rate_close": 171.80990553113062
    },
    {
        "time_period_start": "2024-10-25T08:00:00.0000000Z",
        "time_period_end": "0001-01-01T00:00:00.0000000Z",
        "time_open": "2024-10-25T08:00:00.0000000Z",
        "time_close": "2024-10-25T08:59:59.8000000Z",
        "rate_open": 171.81163094118477,
        "rate_high": 172.8290379004115,
        "rate_low": 170.8069739786763,
        "rate_close": 172.24491591515803
    },
    {
        "time_period_start": "2024-10-25T09:00:00.0000000Z",
        "time_period_end": "0001-01-01T00:00:00.0000000Z",
        "time_open": "2024-10-25T09:00:00.0000000Z",
        "time_close": "2024-10-25T09:59:59.7000000Z",
        "rate_open": 172.24009561992833,
        "rate_high": 173.15683589870628,
        "rate_low": 170.69207092207708,
        "rate_close": 173.08612709140948
    },
    {
        "time_period_start": "2024-10-25T10:00:00.0000000Z",
        "time_period_end": "0001-01-01T00:00:00.0000000Z",
        "time_open": "2024-10-25T10:00:00.0000000Z",
        "time_close": "2024-10-25T10:59:59.1000000Z",
        "rate_open": 173.08612709140965,
        "rate_high": 173.80203360767104,
        "rate_low": 172.27342378546797,
        "rate_close": 173.46968495558602
    },
    {
        "time_period_start": "2024-10-25T11:00:00.0000000Z",
        "time_period_end": "0001-01-01T00:00:00.0000000Z",
        "time_open": "2024-10-25T11:00:00.0000000Z",
        "time_close": "2024-10-25T11:59:07.0000000Z",
        "rate_open": 173.48145641017098,
        "rate_high": 174.04473998911132,
        "rate_low": 173.0641230401145,
        "rate_close": 173.53941516559544
    },
    {
        "time_period_start": "2024-10-25T12:00:00.0000000Z",
        "time_period_end": "0001-01-01T00:00:00.0000000Z",
        "time_open": "2024-10-25T12:00:00.0000000Z",
        "time_close": "2024-10-25T12:59:00.0000000Z",
        "rate_open": 173.54535055414576,
        "rate_high": 174.406799124382,
        "rate_low": 173.14745619278418,
        "rate_close": 173.34676074294939
    },
    {
        "time_period_start": "2024-10-25T13:00:00.0000000Z",
        "time_period_end": "0001-01-01T00:00:00.0000000Z",
        "time_open": "2024-10-25T13:00:00.0000000Z",
        "time_close": "2024-10-25T13:59:57.5000000Z",
        "rate_open": 173.36551250424424,
        "rate_high": 175.18865804867335,
        "rate_low": 172.85849825635745,
        "rate_close": 175.0863453752569
    },
    {
        "time_period_start": "2024-10-25T14:00:00.0000000Z",
        "time_period_end": "0001-01-01T00:00:00.0000000Z",
        "time_open": "2024-10-25T14:00:00.0000000Z",
        "time_close": "2024-10-25T14:59:56.3000000Z",
        "rate_open": 175.12399879780696,
        "rate_high": 177.47544964370894,
        "rate_low": 174.30003533894597,
        "rate_close": 175.56489586048053
    },
    {
        "time_period_start": "2024-10-25T15:00:00.0000000Z",
        "time_period_end": "0001-01-01T00:00:00.0000000Z",
        "time_open": "2024-10-25T15:00:00.0000000Z",
        "time_close": "2024-10-25T15:59:54.2000000Z",
        "rate_open": 175.56128498783767,
        "rate_high": 176.67612935822663,
        "rate_low": 171.22213292823773,
        "rate_close": 172.37532727885838
    },
    {
        "time_period_start": "2024-10-25T16:00:00.0000000Z",
        "time_period_end": "0001-01-01T00:00:00.0000000Z",
        "time_open": "2024-10-25T16:00:00.0000000Z",
        "time_close": "2024-10-25T16:59:55.4000000Z",
        "rate_open": 172.3885692925061,
        "rate_high": 172.95413293478916,
        "rate_low": 170.90364335051063,
        "rate_close": 171.88059914192382
    },
    {
        "time_period_start": "2024-10-25T17:00:00.0000000Z",
        "time_period_end": "0001-01-01T00:00:00.0000000Z",
        "time_open": "2024-10-25T17:00:00.0000000Z",
        "time_close": "2024-10-25T17:59:56.1000000Z",
        "rate_open": 171.93500034139433,
        "rate_high": 172.28022923170232,
        "rate_low": 166.96576011114533,
        "rate_close": 167.86248005646297
    },
    {
        "time_period_start": "2024-10-25T18:00:00.0000000Z",
        "time_period_end": "0001-01-01T00:00:00.0000000Z",
        "time_open": "2024-10-25T18:00:00.0000000Z",
        "time_close": "2024-10-25T18:59:53.4000000Z",
        "rate_open": 167.83934613128108,
        "rate_high": 171.3951414210202,
        "rate_low": 164.71457743832224,
        "rate_close": 169.1990538789654
    },
    {
        "time_period_start": "2024-10-25T19:00:00.0000000Z",
        "time_period_end": "0001-01-01T00:00:00.0000000Z",
        "time_open": "2024-10-25T19:00:00.0000000Z",
        "time_close": "2024-10-25T19:59:54.2000000Z",
        "rate_open": 169.2658269510107,
        "rate_high": 169.48713933804868,
        "rate_low": 167.29952714297804,
        "rate_close": 167.84494193253036
    },
    {
        "time_period_start": "2024-10-25T20:00:00.0000000Z",
        "time_period_end": "0001-01-01T00:00:00.0000000Z",
        "time_open": "2024-10-25T20:00:00.0000000Z",
        "time_close": "2024-10-25T20:59:57.0000000Z",
        "rate_open": 167.70254889934415,
        "rate_high": 168.54437908428636,
        "rate_low": 165.9903373305517,
        "rate_close": 166.69571740242563
    },
    {
        "time_period_start": "2024-10-25T21:00:00.0000000Z",
        "time_period_end": "0001-01-01T00:00:00.0000000Z",
        "time_open": "2024-10-25T21:00:00.0000000Z",
        "time_close": "2024-10-25T21:59:54.6000000Z",
        "rate_open": 166.8325580678153,
        "rate_high": 168.38953181426083,
        "rate_low": 166.7251313556868,
        "rate_close": 167.95758389295452
    },
    {
        "time_period_start": "2024-10-25T22:00:00.0000000Z",
        "time_period_end": "0001-01-01T00:00:00.0000000Z",
        "time_open": "2024-10-25T22:00:00.0000000Z",
        "time_close": "2024-10-25T22:59:57.4000000Z",
        "rate_open": 167.94861666297948,
        "rate_high": 167.96827161662242,
        "rate_low": 163.34662273620216,
        "rate_close": 163.52573805722506
    },
    {
        "time_period_start": "2024-10-25T23:00:00.0000000Z",
        "time_period_end": "0001-01-01T00:00:00.0000000Z",
        "time_open": "2024-10-25T23:00:00.0000000Z",
        "time_close": "2024-10-25T23:59:53.3000000Z",
        "rate_open": 163.52293628523532,
        "rate_high": 165.1056446414487,
        "rate_low": 159.69415769691003,
        "rate_close": 164.74985170029268
    },
    {
        "time_period_start": "2024-10-26T00:00:00.0000000Z",
        "time_period_end": "0001-01-01T00:00:00.0000000Z",
        "time_open": "2024-10-26T00:00:00.0000000Z",
        "time_close": "2024-10-26T00:59:46.2000000Z",
        "rate_open": 164.6147319394689,
        "rate_high": 165.67645134341973,
        "rate_low": 163.61514089117713,
        "rate_close": 164.64658936375417
    },
    {
        "time_period_start": "2024-10-26T01:00:00.0000000Z",
        "time_period_end": "0001-01-01T00:00:00.0000000Z",
        "time_open": "2024-10-26T01:00:00.0000000Z",
        "time_close": "2024-10-26T01:59:56.1000000Z",
        "rate_open": 164.6397767220984,
        "rate_high": 165.07517881704746,
        "rate_low": 163.066307544181,
        "rate_close": 163.08846578493726
    },
    {
        "time_period_start": "2024-10-26T02:00:00.0000000Z",
        "time_period_end": "0001-01-01T00:00:00.0000000Z",
        "time_open": "2024-10-26T02:00:00.0000000Z",
        "time_close": "2024-10-26T02:59:54.6000000Z",
        "rate_open": 163.10044818601494,
        "rate_high": 165.64610564597916,
        "rate_low": 162.22162712222092,
        "rate_close": 164.75816749129115
    },
    {
        "time_period_start": "2024-10-26T03:00:00.0000000Z",
        "time_period_end": "0001-01-01T00:00:00.0000000Z",
        "time_open": "2024-10-26T03:00:00.0000000Z",
        "time_close": "2024-10-26T03:59:59.7000000Z",
        "rate_open": 164.58998722656017,
        "rate_high": 165.65994213975947,
        "rate_low": 163.90209209380293,
        "rate_close": 165.42990141190768
    },
    {
        "time_period_start": "2024-10-26T04:00:00.0000000Z",
        "time_period_end": "0001-01-01T00:00:00.0000000Z",
        "time_open": "2024-10-26T04:00:00.0000000Z",
        "time_close": "2024-10-26T04:59:54.3000000Z",
        "rate_open": 165.39872473575957,
        "rate_high": 166.38580034389943,
        "rate_low": 165.0911173972719,
        "rate_close": 166.333433476748
    },
    {
        "time_period_start": "2024-10-26T05:00:00.0000000Z",
        "time_period_end": "0001-01-01T00:00:00.0000000Z",
        "time_open": "2024-10-26T05:00:00.0000000Z",
        "time_close": "2024-10-26T05:59:54.3000000Z",
        "rate_open": 166.3235668848427,
        "rate_high": 167.52320459092678,
        "rate_low": 166.0184584580464,
        "rate_close": 166.67480916100502
    },
    {
        "time_period_start": "2024-10-26T06:00:00.0000000Z",
        "time_period_end": "0001-01-01T00:00:00.0000000Z",
        "time_open": "2024-10-26T06:00:00.0000000Z",
        "time_close": "2024-10-26T06:59:55.8000000Z",
        "rate_open": 166.6335741397963,
        "rate_high": 168.3585438051535,
        "rate_low": 166.21053201233298,
        "rate_close": 168.25012176861625
    },
    {
        "time_period_start": "2024-10-26T07:00:00.0000000Z",
        "time_period_end": "0001-01-01T00:00:00.0000000Z",
        "time_open": "2024-10-26T07:00:00.0000000Z",
        "time_close": "2024-10-26T07:59:56.3000000Z",
        "rate_open": 168.24953048721076,
        "rate_high": 168.94104051609816,
        "rate_low": 167.10611565364283,
        "rate_close": 167.16559354380084
    },
    {
        "time_period_start": "2024-10-26T08:00:00.0000000Z",
        "time_period_end": "0001-01-01T00:00:00.0000000Z",
        "time_open": "2024-10-26T08:00:00.0000000Z",
        "time_close": "2024-10-26T08:59:57.1000000Z",
        "rate_open": 167.16405389851525,
        "rate_high": 168.40948810174226,
        "rate_low": 167.15781181894923,
        "rate_close": 168.21129434627568
    },
    {
        "time_period_start": "2024-10-26T09:00:00.0000000Z",
        "time_period_end": "0001-01-01T00:00:00.0000000Z",
        "time_open": "2024-10-26T09:00:00.0000000Z",
        "time_close": "2024-10-26T09:59:55.3000000Z",
        "rate_open": 168.22620893491768,
        "rate_high": 169.33858053065447,
        "rate_low": 167.89840600846145,
        "rate_close": 168.98044615747813
    },
    {
        "time_period_start": "2024-10-26T10:00:00.0000000Z",
        "time_period_end": "0001-01-01T00:00:00.0000000Z",
        "time_open": "2024-10-26T10:00:00.0000000Z",
        "time_close": "2024-10-26T10:59:55.8000000Z",
        "rate_open": 168.956088573294,
        "rate_high": 170.13292120413223,
        "rate_low": 168.87344022185576,
        "rate_close": 169.06531700399373
    },
    {
        "time_period_start": "2024-10-26T11:00:00.0000000Z",
        "time_period_end": "0001-01-01T00:00:00.0000000Z",
        "time_open": "2024-10-26T11:00:00.0000000Z",
        "time_close": "2024-10-26T11:59:59.9000000Z",
        "rate_open": 169.07001612886341,
        "rate_high": 169.42631927446936,
        "rate_low": 168.1584400820694,
        "rate_close": 168.46688163797944
    },
    {
        "time_period_start": "2024-10-26T12:00:00.0000000Z",
        "time_period_end": "0001-01-01T00:00:00.0000000Z",
        "time_open": "2024-10-26T12:00:00.0000000Z",
        "time_close": "2024-10-26T12:59:58.6000000Z",
        "rate_open": 168.47153536170947,
        "rate_high": 169.27665190543632,
        "rate_low": 168.17093979168592,
        "rate_close": 168.83830871175218
    },
    {
        "time_period_start": "2024-10-26T13:00:00.0000000Z",
        "time_period_end": "0001-01-01T00:00:00.0000000Z",
        "time_open": "2024-10-26T13:00:00.0000000Z",
        "time_close": "2024-10-26T13:59:58.1000000Z",
        "rate_open": 168.8391176118095,
        "rate_high": 169.06133362573604,
        "rate_low": 167.80892315235843,
        "rate_close": 167.93644305949562
    },
    {
        "time_period_start": "2024-10-26T14:00:00.0000000Z",
        "time_period_end": "0001-01-01T00:00:00.0000000Z",
        "time_open": "2024-10-26T14:00:00.0000000Z",
        "time_close": "2024-10-26T14:59:58.7000000Z",
        "rate_open": 167.89486594898824,
        "rate_high": 168.41007561945054,
        "rate_low": 167.18687568985303,
        "rate_close": 167.51024957454558
    },
    {
        "time_period_start": "2024-10-26T15:00:00.0000000Z",
        "time_period_end": "0001-01-01T00:00:00.0000000Z",
        "time_open": "2024-10-26T15:00:00.0000000Z",
        "time_close": "2024-10-26T15:59:57.5000000Z",
        "rate_open": 167.509177470656,
        "rate_high": 169.13731509379522,
        "rate_low": 167.48990530627347,
        "rate_close": 168.4011332338531
    },
    {
        "time_period_start": "2024-10-26T16:00:00.0000000Z",
        "time_period_end": "0001-01-01T00:00:00.0000000Z",
        "time_open": "2024-10-26T16:00:00.0000000Z",
        "time_close": "2024-10-26T16:59:58.3000000Z",
        "rate_open": 168.38859405104097,
        "rate_high": 169.57645444486906,
        "rate_low": 168.1692150350943,
        "rate_close": 169.0482899700727
    },
    {
        "time_period_start": "2024-10-26T17:00:00.0000000Z",
        "time_period_end": "0001-01-01T00:00:00.0000000Z",
        "time_open": "2024-10-26T17:00:00.0000000Z",
        "time_close": "2024-10-26T17:59:56.7000000Z",
        "rate_open": 169.03599251075067,
        "rate_high": 170.01232155966855,
        "rate_low": 168.70126585419482,
        "rate_close": 169.89131335136582
    },
    {
        "time_period_start": "2024-10-26T18:00:00.0000000Z",
        "time_period_end": "0001-01-01T00:00:00.0000000Z",
        "time_open": "2024-10-26T18:00:00.0000000Z",
        "time_close": "2024-10-26T18:59:55.4000000Z",
        "rate_open": 169.8543164904326,
        "rate_high": 170.15911543397655,
        "rate_low": 169.36006747610958,
        "rate_close": 169.68118624081757
    },
    {
        "time_period_start": "2024-10-26T19:00:00.0000000Z",
        "time_period_end": "0001-01-01T00:00:00.0000000Z",
        "time_open": "2024-10-26T19:00:00.0000000Z",
        "time_close": "2024-10-26T19:59:54.5000000Z",
        "rate_open": 169.6803640921549,
        "rate_high": 172.05519545211186,
        "rate_low": 169.64719577581573,
        "rate_close": 171.31065597530875
    },
    {
        "time_period_start": "2024-10-26T20:00:00.0000000Z",
        "time_period_end": "0001-01-01T00:00:00.0000000Z",
        "time_open": "2024-10-26T20:00:00.0000000Z",
        "time_close": "2024-10-26T20:59:58.6000000Z",
        "rate_open": 171.31571560521883,
        "rate_high": 172.86026441231635,
        "rate_low": 171.18254393185657,
        "rate_close": 172.3070613053327
    },
    {
        "time_period_start": "2024-10-26T21:00:00.0000000Z",
        "time_period_end": "0001-01-01T00:00:00.0000000Z",
        "time_open": "2024-10-26T21:00:00.0000000Z",
        "time_close": "2024-10-26T21:59:56.1000000Z",
        "rate_open": 172.32319813604832,
        "rate_high": 173.04931792621528,
        "rate_low": 170.80512347058755,
        "rate_close": 171.0920493595966
    },
    {
        "time_period_start": "2024-10-26T22:00:00.0000000Z",
        "time_period_end": "0001-01-01T00:00:00.0000000Z",
        "time_open": "2024-10-26T22:00:00.0000000Z",
        "time_close": "2024-10-26T22:59:58.0000000Z",
        "rate_open": 171.10395346827113,
        "rate_high": 171.63303622082418,
        "rate_low": 170.659219179893,
        "rate_close": 171.23157621214514
    },
    {
        "time_period_start": "2024-10-26T23:00:00.0000000Z",
        "time_period_end": "0001-01-01T00:00:00.0000000Z",
        "time_open": "2024-10-26T23:00:00.0000000Z",
        "time_close": "2024-10-26T23:59:55.1000000Z",
        "rate_open": 171.1888720341263,
        "rate_high": 171.33864730227032,
        "rate_low": 170.4505515145825,
        "rate_close": 170.67506640874217
    },
    {
        "time_period_start": "2024-10-27T00:00:00.0000000Z",
        "time_period_end": "0001-01-01T00:00:00.0000000Z",
        "time_open": "2024-10-27T00:00:00.0000000Z",
        "time_close": "2024-10-27T00:59:57.2000000Z",
        "rate_open": 170.68639329318754,
        "rate_high": 171.0310990989932,
        "rate_low": 170.08851329751553,
        "rate_close": 170.4384159109907
    },
    {
        "time_period_start": "2024-10-27T01:00:00.0000000Z",
        "time_period_end": "0001-01-01T00:00:00.0000000Z",
        "time_open": "2024-10-27T01:00:00.0000000Z",
        "time_close": "2024-10-27T01:59:59.5000000Z",
        "rate_open": 170.4367336574749,
        "rate_high": 172.3192503485752,
        "rate_low": 170.15196494032435,
        "rate_close": 172.19215176004505
    },
    {
        "time_period_start": "2024-10-27T02:00:00.0000000Z",
        "time_period_end": "0001-01-01T00:00:00.0000000Z",
        "time_open": "2024-10-27T02:00:00.0000000Z",
        "time_close": "2024-10-27T02:59:59.5000000Z",
        "rate_open": 172.19221993096892,
        "rate_high": 173.01568987331353,
        "rate_low": 171.10816372461932,
        "rate_close": 171.35984656628466
    },
    {
        "time_period_start": "2024-10-27T03:00:00.0000000Z",
        "time_period_end": "0001-01-01T00:00:00.0000000Z",
        "time_open": "2024-10-27T03:00:00.0000000Z",
        "time_close": "2024-10-27T03:59:59.2000000Z",
        "rate_open": 171.3475598361463,
        "rate_high": 172.17115278592647,
        "rate_low": 170.89851873583163,
        "rate_close": 171.92139796495118
    },
    {
        "time_period_start": "2024-10-27T04:00:00.0000000Z",
        "time_period_end": "0001-01-01T00:00:00.0000000Z",
        "time_open": "2024-10-27T04:00:00.0000000Z",
        "time_close": "2024-10-27T04:59:56.7000000Z",
        "rate_open": 171.9304142370309,
        "rate_high": 172.4287267425695,
        "rate_low": 171.44460424395564,
        "rate_close": 172.30832377603772
    },
    {
        "time_period_start": "2024-10-27T05:00:00.0000000Z",
        "time_period_end": "0001-01-01T00:00:00.0000000Z",
        "time_open": "2024-10-27T05:00:00.0000000Z",
        "time_close": "2024-10-27T05:59:55.9000000Z",
        "rate_open": 172.2917105894219,
        "rate_high": 172.8889566601663,
        "rate_low": 172.10434515246445,
        "rate_close": 172.3865781259052
    },
    {
        "time_period_start": "2024-10-27T06:00:00.0000000Z",
        "time_period_end": "0001-01-01T00:00:00.0000000Z",
        "time_open": "2024-10-27T06:00:00.0000000Z",
        "time_close": "2024-10-27T06:59:58.5000000Z",
        "rate_open": 172.32959408489526,
        "rate_high": 173.2038406654434,
        "rate_low": 172.01138014454722,
        "rate_close": 173.17213809209989
    },
    {
        "time_period_start": "2024-10-27T07:00:00.0000000Z",
        "time_period_end": "0001-01-01T00:00:00.0000000Z",
        "time_open": "2024-10-27T07:00:00.0000000Z",
        "time_close": "2024-10-27T07:59:43.4000000Z",
        "rate_open": 173.1637410284829,
        "rate_high": 173.31709975773163,
        "rate_low": 172.6244353372204,
        "rate_close": 173.06295012482875
    },
    {
        "time_period_start": "2024-10-27T08:00:00.0000000Z",
        "time_period_end": "0001-01-01T00:00:00.0000000Z",
        "time_open": "2024-10-27T08:00:00.0000000Z",
        "time_close": "2024-10-27T08:59:54.5000000Z",
        "rate_open": 173.07583270774572,
        "rate_high": 175.33599530957173,
        "rate_low": 172.9307813257167,
        "rate_close": 175.14114167478317
    },
    {
        "time_period_start": "2024-10-27T09:00:00.0000000Z",
        "time_period_end": "0001-01-01T00:00:00.0000000Z",
        "time_open": "2024-10-27T09:00:00.0000000Z",
        "time_close": "2024-10-27T09:59:55.2000000Z",
        "rate_open": 175.09381598700057,
        "rate_high": 175.30001082235754,
        "rate_low": 173.46311588651673,
        "rate_close": 174.4236152536616
    },
    {
        "time_period_start": "2024-10-27T10:00:00.0000000Z",
        "time_period_end": "0001-01-01T00:00:00.0000000Z",
        "time_open": "2024-10-27T10:00:00.0000000Z",
        "time_close": "2024-10-27T10:59:55.6000000Z",
        "rate_open": 174.41345462987783,
        "rate_high": 174.53898336758581,
        "rate_low": 173.34316005878767,
        "rate_close": 173.46627712904302
    },
    {
        "time_period_start": "2024-10-27T11:00:00.0000000Z",
        "time_period_end": "0001-01-01T00:00:00.0000000Z",
        "time_open": "2024-10-27T11:00:00.0000000Z",
        "time_close": "2024-10-27T11:59:58.8000000Z",
        "rate_open": 173.4645354167101,
        "rate_high": 174.76195851801103,
        "rate_low": 173.23338429820132,
        "rate_close": 173.81004880507336
    },
    {
        "time_period_start": "2024-10-27T12:00:00.0000000Z",
        "time_period_end": "0001-01-01T00:00:00.0000000Z",
        "time_open": "2024-10-27T12:00:00.0000000Z",
        "time_close": "2024-10-27T12:59:58.4000000Z",
        "rate_open": 173.8100586854427,
        "rate_high": 175.85313818079268,
        "rate_low": 173.75532506026536,
        "rate_close": 175.58309470846206
    },
    {
        "time_period_start": "2024-10-27T13:00:00.0000000Z",
        "time_period_end": "0001-01-01T00:00:00.0000000Z",
        "time_open": "2024-10-27T13:00:00.0000000Z",
        "time_close": "2024-10-27T13:59:55.4000000Z",
        "rate_open": 175.57852340406836,
        "rate_high": 176.54006736979704,
        "rate_low": 175.32635309185255,
        "rate_close": 175.80088096732018
    },
    {
        "time_period_start": "2024-10-27T14:00:00.0000000Z",
        "time_period_end": "0001-01-01T00:00:00.0000000Z",
        "time_open": "2024-10-27T14:00:00.0000000Z",
        "time_close": "2024-10-27T14:59:59.7000000Z",
        "rate_open": 175.77480725898317,
        "rate_high": 176.8531977157011,
        "rate_low": 175.50323627516178,
        "rate_close": 176.25053843876609
    },
    {
        "time_period_start": "2024-10-27T15:00:00.0000000Z",
        "time_period_end": "0001-01-01T00:00:00.0000000Z",
        "time_open": "2024-10-27T15:00:00.0000000Z",
        "time_close": "2024-10-27T15:59:55.0000000Z",
        "rate_open": 176.25829331163416,
        "rate_high": 176.7156551007254,
        "rate_low": 175.43521565802564,
        "rate_close": 175.5626123654354
    },
    {
        "time_period_start": "2024-10-27T16:00:00.0000000Z",
        "time_period_end": "0001-01-01T00:00:00.0000000Z",
        "time_open": "2024-10-27T16:00:00.0000000Z",
        "time_close": "2024-10-27T16:59:58.0000000Z",
        "rate_open": 175.58301914910427,
        "rate_high": 176.5531885644759,
        "rate_low": 174.5087285182161,
        "rate_close": 176.51563215251315
    },
    {
        "time_period_start": "2024-10-27T17:00:00.0000000Z",
        "time_period_end": "0001-01-01T00:00:00.0000000Z",
        "time_open": "2024-10-27T17:00:00.0000000Z",
        "time_close": "2024-10-27T17:59:55.5000000Z",
        "rate_open": 176.52302036853266,
        "rate_high": 177.53548259368145,
        "rate_low": 175.9695363612398,
        "rate_close": 176.00642831810467
    },
    {
        "time_period_start": "2024-10-27T18:00:00.0000000Z",
        "time_period_end": "0001-01-01T00:00:00.0000000Z",
        "time_open": "2024-10-27T18:00:00.0000000Z",
        "time_close": "2024-10-27T18:59:58.3000000Z",
        "rate_open": 176.00623005784072,
        "rate_high": 177.11790096624412,
        "rate_low": 175.59359221717293,
        "rate_close": 175.6979762455539
    },
    {
        "time_period_start": "2024-10-27T19:00:00.0000000Z",
        "time_period_end": "0001-01-01T00:00:00.0000000Z",
        "time_open": "2024-10-27T19:00:00.0000000Z",
        "time_close": "2024-10-27T19:59:59.7000000Z",
        "rate_open": 175.6430549022804,
        "rate_high": 177.16851655258765,
        "rate_low": 175.42021222060765,
        "rate_close": 176.99837816445816
    },
    {
        "time_period_start": "2024-10-27T20:00:00.0000000Z",
        "time_period_end": "0001-01-01T00:00:00.0000000Z",
        "time_open": "2024-10-27T20:00:00.0000000Z",
        "time_close": "2024-10-27T20:59:57.9000000Z",
        "rate_open": 176.9942946162644,
        "rate_high": 177.2855761859493,
        "rate_low": 176.40950356871812,
        "rate_close": 176.6979336734171
    },
    {
        "time_period_start": "2024-10-27T21:00:00.0000000Z",
        "time_period_end": "0001-01-01T00:00:00.0000000Z",
        "time_open": "2024-10-27T21:00:00.0000000Z",
        "time_close": "2024-10-27T21:59:57.5000000Z",
        "rate_open": 176.68538951628108,
        "rate_high": 177.84674181672847,
        "rate_low": 176.3729238076807,
        "rate_close": 176.88702128382783
    },
    {
        "time_period_start": "2024-10-27T22:00:00.0000000Z",
        "time_period_end": "0001-01-01T00:00:00.0000000Z",
        "time_open": "2024-10-27T22:00:00.0000000Z",
        "time_close": "2024-10-27T22:59:56.9000000Z",
        "rate_open": 176.8811437317622,
        "rate_high": 178.0025698146555,
        "rate_low": 176.83913505899554,
        "rate_close": 177.54550102904253
    },
    {
        "time_period_start": "2024-10-27T23:00:00.0000000Z",
        "time_period_end": "0001-01-01T00:00:00.0000000Z",
        "time_open": "2024-10-27T23:00:00.0000000Z",
        "time_close": "2024-10-27T23:59:54.6000000Z",
        "rate_open": 177.54301001379997,
        "rate_high": 178.06598985472067,
        "rate_low": 176.46406133127724,
        "rate_close": 176.61190844558445
    },
    {
        "time_period_start": "2024-10-28T00:00:00.0000000Z",
        "time_period_end": "0001-01-01T00:00:00.0000000Z",
        "time_open": "2024-10-28T00:00:00.0000000Z",
        "time_close": "2024-10-28T00:59:35.1000000Z",
        "rate_open": 176.42907152921185,
        "rate_high": 176.98670909935188,
        "rate_low": 175.58455872311396,
        "rate_close": 175.83468122534268
    },
    {
        "time_period_start": "2024-10-28T01:00:00.0000000Z",
        "time_period_end": "0001-01-01T00:00:00.0000000Z",
        "time_open": "2024-10-28T01:00:00.0000000Z",
        "time_close": "2024-10-28T01:59:44.1000000Z",
        "rate_open": 175.86598042017903,
        "rate_high": 176.37176356399695,
        "rate_low": 175.31215046815043,
        "rate_close": 175.5030488566705
    },
    {
        "time_period_start": "2024-10-28T02:00:00.0000000Z",
        "time_period_end": "0001-01-01T00:00:00.0000000Z",
        "time_open": "2024-10-28T02:00:00.0000000Z",
        "time_close": "2024-10-28T02:59:57.4000000Z",
        "rate_open": 175.4594941535876,
        "rate_high": 175.93725054766088,
        "rate_low": 174.6535998588201,
        "rate_close": 174.98640998081706
    },
    {
        "time_period_start": "2024-10-28T03:00:00.0000000Z",
        "time_period_end": "0001-01-01T00:00:00.0000000Z",
        "time_open": "2024-10-28T03:00:00.0000000Z",
        "time_close": "2024-10-28T03:59:57.1000000Z",
        "rate_open": 174.97024720562177,
        "rate_high": 176.54081432396978,
        "rate_low": 174.88548363795584,
        "rate_close": 175.58755065358866
    },
    {
        "time_period_start": "2024-10-28T04:00:00.0000000Z",
        "time_period_end": "0001-01-01T00:00:00.0000000Z",
        "time_open": "2024-10-28T04:00:00.0000000Z",
        "time_close": "2024-10-28T04:59:55.2000000Z",
        "rate_open": 175.54994897212362,
        "rate_high": 175.55996337569832,
        "rate_low": 173.67237698107178,
        "rate_close": 175.08438349580737
    },
    {
        "time_period_start": "2024-10-28T05:00:00.0000000Z",
        "time_period_end": "0001-01-01T00:00:00.0000000Z",
        "time_open": "2024-10-28T05:00:00.0000000Z",
        "time_close": "2024-10-28T05:59:58.2000000Z",
        "rate_open": 175.081193830263,
        "rate_high": 175.094188263899,
        "rate_low": 172.93003249083984,
        "rate_close": 174.241400620074
    },
    {
        "time_period_start": "2024-10-28T06:00:00.0000000Z",
        "time_period_end": "0001-01-01T00:00:00.0000000Z",
        "time_open": "2024-10-28T06:00:00.0000000Z",
        "time_close": "2024-10-28T06:59:59.0000000Z",
        "rate_open": 174.16947541090963,
        "rate_high": 174.48919456460516,
        "rate_low": 173.16502265477692,
        "rate_close": 174.3282928502184
    },
    {
        "time_period_start": "2024-10-28T07:00:00.0000000Z",
        "time_period_end": "0001-01-01T00:00:00.0000000Z",
        "time_open": "2024-10-28T07:00:00.0000000Z",
        "time_close": "2024-10-28T07:59:58.5000000Z",
        "rate_open": 174.33086554494872,
        "rate_high": 176.47207209017196,
        "rate_low": 174.16446798792276,
        "rate_close": 175.47091880006758
    },
    {
        "time_period_start": "2024-10-28T08:00:00.0000000Z",
        "time_period_end": "0001-01-01T00:00:00.0000000Z",
        "time_open": "2024-10-28T08:00:00.0000000Z",
        "time_close": "2024-10-28T08:59:59.8000000Z",
        "rate_open": 175.47497270592442,
        "rate_high": 177.20866275204403,
        "rate_low": 175.4148973993147,
        "rate_close": 176.6597238851872
    },
    {
        "time_period_start": "2024-10-28T09:00:00.0000000Z",
        "time_period_end": "0001-01-01T00:00:00.0000000Z",
        "time_open": "2024-10-28T09:00:00.0000000Z",
        "time_close": "2024-10-28T09:59:56.1000000Z",
        "rate_open": 176.66471617773746,
        "rate_high": 177.64280143990223,
        "rate_low": 176.2174333375439,
        "rate_close": 177.56817773529644
    },
    {
        "time_period_start": "2024-10-28T10:00:00.0000000Z",
        "time_period_end": "0001-01-01T00:00:00.0000000Z",
        "time_open": "2024-10-28T10:00:02.5000000Z",
        "time_close": "2024-10-28T10:59:57.1000000Z",
        "rate_open": 177.56258243535945,
        "rate_high": 178.38072393496697,
        "rate_low": 176.99588102966976,
        "rate_close": 177.090042839529
    },
    {
        "time_period_start": "2024-10-28T11:00:00.0000000Z",
        "time_period_end": "0001-01-01T00:00:00.0000000Z",
        "time_open": "2024-10-28T11:00:03.7000000Z",
        "time_close": "2024-10-28T11:59:57.8000000Z",
        "rate_open": 177.0485005391145,
        "rate_high": 177.62131347192587,
        "rate_low": 176.57748264846552,
        "rate_close": 176.75927136058448
    },
    {
        "time_period_start": "2024-10-28T12:00:00.0000000Z",
        "time_period_end": "0001-01-01T00:00:00.0000000Z",
        "time_open": "2024-10-28T12:00:03.8000000Z",
        "time_close": "2024-10-28T12:59:57.9000000Z",
        "rate_open": 176.8176265399297,
        "rate_high": 177.73953399433492,
        "rate_low": 176.14514316742444,
        "rate_close": 177.4773393403333
    },
    {
        "time_period_start": "2024-10-28T13:00:00.0000000Z",
        "time_period_end": "0001-01-01T00:00:00.0000000Z",
        "time_open": "2024-10-28T13:00:03.8000000Z",
        "time_close": "2024-10-28T13:59:57.3000000Z",
        "rate_open": 177.40012960382822,
        "rate_high": 177.5958560910626,
        "rate_low": 174.97573105919778,
        "rate_close": 175.04000981657148
    },
    {
        "time_period_start": "2024-10-28T14:00:00.0000000Z",
        "time_period_end": "0001-01-01T00:00:00.0000000Z",
        "time_open": "2024-10-28T14:00:04.9000000Z",
        "time_close": "2024-10-28T14:59:56.8000000Z",
        "rate_open": 175.02774877634914,
        "rate_high": 175.53207610430027,
        "rate_low": 173.2730754771627,
        "rate_close": 174.8620419721679
    },
    {
        "time_period_start": "2024-10-28T15:00:00.0000000Z",
        "time_period_end": "0001-01-01T00:00:00.0000000Z",
        "time_open": "2024-10-28T15:00:03.6000000Z",
        "time_close": "2024-10-28T15:59:56.7000000Z",
        "rate_open": 174.8220841210263,
        "rate_high": 174.86955279102645,
        "rate_low": 173.1477886276277,
        "rate_close": 173.28312939461802
    },
    {
        "time_period_start": "2024-10-28T16:00:00.0000000Z",
        "time_period_end": "0001-01-01T00:00:00.0000000Z",
        "time_open": "2024-10-28T16:00:03.7000000Z",
        "time_close": "2024-10-28T16:59:58.1000000Z",
        "rate_open": 173.22259030982042,
        "rate_high": 175.0535231096922,
        "rate_low": 172.99243756272585,
        "rate_close": 173.72297760058348
    },
    {
        "time_period_start": "2024-10-28T17:00:00.0000000Z",
        "time_period_end": "0001-01-01T00:00:00.0000000Z",
        "time_open": "2024-10-28T17:00:05.6000000Z",
        "time_close": "2024-10-28T17:59:59.5000000Z",
        "rate_open": 173.73579200519092,
        "rate_high": 175.74871538186198,
        "rate_low": 172.36771980823508,
        "rate_close": 174.68956997815326
    },
    {
        "time_period_start": "2024-10-28T18:00:00.0000000Z",
        "time_period_end": "0001-01-01T00:00:00.0000000Z",
        "time_open": "2024-10-28T18:00:05.7000000Z",
        "time_close": "2024-10-28T18:59:55.6000000Z",
        "rate_open": 174.6325819567261,
        "rate_high": 175.8449757819351,
        "rate_low": 174.5503115386921,
        "rate_close": 175.36923503013244
    },
    {
        "time_period_start": "2024-10-28T19:00:00.0000000Z",
        "time_period_end": "0001-01-01T00:00:00.0000000Z",
        "time_open": "2024-10-28T19:00:01.7000000Z",
        "time_close": "2024-10-28T19:59:57.5000000Z",
        "rate_open": 175.43320715605057,
        "rate_high": 177.94409658262109,
        "rate_low": 175.21628459808838,
        "rate_close": 176.2922949691122
    },
    {
        "time_period_start": "2024-10-28T20:00:00.0000000Z",
        "time_period_end": "0001-01-01T00:00:00.0000000Z",
        "time_open": "2024-10-28T20:00:03.9000000Z",
        "time_close": "2024-10-28T20:59:54.7000000Z",
        "rate_open": 176.35481806745514,
        "rate_high": 176.5373959908393,
        "rate_low": 175.6797289395402,
        "rate_close": 176.32289600858988
    },
    {
        "time_period_start": "2024-10-28T21:00:00.0000000Z",
        "time_period_end": "0001-01-01T00:00:00.0000000Z",
        "time_open": "2024-10-28T21:00:00.7000000Z",
        "time_close": "2024-10-28T21:59:55.1000000Z",
        "rate_open": 176.5716455295683,
        "rate_high": 177.8618227765219,
        "rate_low": 176.26309733350377,
        "rate_close": 177.56033472918912
    },
    {
        "time_period_start": "2024-10-28T22:00:00.0000000Z",
        "time_period_end": "0001-01-01T00:00:00.0000000Z",
        "time_open": "2024-10-28T22:00:00.9000000Z",
        "time_close": "2024-10-28T22:59:54.3000000Z",
        "rate_open": 177.56681337204355,
        "rate_high": 179.61171883365898,
        "rate_low": 177.5376722214548,
        "rate_close": 178.5456301579788
    },
    {
        "time_period_start": "2024-10-28T23:00:00.0000000Z",
        "time_period_end": "0001-01-01T00:00:00.0000000Z",
        "time_open": "2024-10-28T23:00:01.0000000Z",
        "time_close": "2024-10-28T23:59:43.0000000Z",
        "rate_open": 178.53735238073492,
        "rate_high": 179.35727599814237,
        "rate_low": 177.80793827140627,
        "rate_close": 178.1690213354948
    },
    {
        "time_period_start": "2024-10-29T00:00:00.0000000Z",
        "time_period_end": "0001-01-01T00:00:00.0000000Z",
        "time_open": "2024-10-29T00:00:16.3000000Z",
        "time_close": "2024-10-29T00:59:59.0000000Z",
        "rate_open": 178.23113709525623,
        "rate_high": 178.87281836740365,
        "rate_low": 177.29094906985128,
        "rate_close": 178.56655141011908
    },
    {
        "time_period_start": "2024-10-29T01:00:00.0000000Z",
        "time_period_end": "0001-01-01T00:00:00.0000000Z",
        "time_open": "2024-10-29T01:00:06.5000000Z",
        "time_close": "2024-10-29T01:59:59.4000000Z",
        "rate_open": 178.48336756621407,
        "rate_high": 178.49390911196303,
        "rate_low": 177.02097073279356,
        "rate_close": 178.18071251111823
    },
    {
        "time_period_start": "2024-10-29T02:00:00.0000000Z",
        "time_period_end": "0001-01-01T00:00:00.0000000Z",
        "time_open": "2024-10-29T02:00:07.7000000Z",
        "time_close": "2024-10-29T02:59:54.3000000Z",
        "rate_open": 178.14124104412807,
        "rate_high": 182.16224149070626,
        "rate_low": 177.83263841095152,
        "rate_close": 180.70014894625945
    },
    {
        "time_period_start": "2024-10-29T03:00:00.0000000Z",
        "time_period_end": "0001-01-01T00:00:00.0000000Z",
        "time_open": "2024-10-29T03:00:00.7000000Z",
        "time_close": "2024-10-29T03:59:57.7000000Z",
        "rate_open": 180.68788106972693,
        "rate_high": 181.80997917642935,
        "rate_low": 180.26257038305658,
        "rate_close": 181.67314674387302
    }
]
  useEffect(() => {
    const init = () => {
      if (chartRef.current) {
        if (chartManagerRef.current) {
          chartManagerRef.current.destroy();
        }

        // Transform the fixed data into the format expected by ChartManager
        const transformedData = fixedData.map(data => ({
          close: data.rate_close,
          high: data.rate_high,
          low: data.rate_low,
          open: data.rate_open,
          timestamp: new Date(data.time_period_start)
        })).sort((x, y) => (x.timestamp < y.timestamp ? -1 : 1));

        const chartManager = new ChartManager(
          chartRef.current,
          transformedData,
          {
            background: "#0e0f14",
            color: "white",
          }
        );
        
        //@ts-ignore
        chartManagerRef.current = chartManager;
      }
    };

    init();
  }, [market, chartRef]);

  return (
    <>
      <div 
        ref={chartRef} 
        style={{ 
          height: "50%", 
          width: "100%", 
          marginTop: 4 
        }}
      />
    </>
  );
}